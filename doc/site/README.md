# Setting Up Local Site Development

For basic local site development, all that is required is [Hugo](https://gohugo.io/installation/).

## Testing And Modifying Locally

`cd` into `doc/site` and run `hugo server`. It will take 2-5 seconds to generate the site, but then any changes you make will be compiled quickly.

It's worth noting that since it's an incremental compile by default, if you start getting odd behavior, restart the server to build it fresh. This can happen a lot if you're messing with partials or layouts.

See [Writing Articles guide](content/development/writing-site-articles.md) for info on writing articles.

## Generating and Testing Lua Docs

By default, `doc/site/content/docs/lua-api` is not tracked in the repo, since they are autogenerated.
To generate, install the following:

1. [Hugo](https://gohugo.io/installation/)
2. [emmylua_doc_cli](https://github.com/CppCXY/emmylua-analyzer-rust/tree/main/crates/emmylua_doc_cli)
3. [lua-doc-extractor](https://github.com/rhys-vdw/lua-doc-extractor) version 3

You can run commands manually or use [Task](https://taskfile.dev/installation/).

`task generate-docs` will extract lua meta files, generate markdown, and format it into the Hugo website. Can only be called in `doc`.
Otherwise, do this manually:

```bash
lua-doc-extractor rts/Lua/**/*.cpp rts/Rml/SolLua/**/*.cpp --dest rts/Lua/library/generated
emmylua_doc_cli -i rts/Lua/library -o doc/temp  --override-template doc/emmylua-doc-cli-template
python3 doc/site/generate_from_meta.py doc/temp soc/site/content/docs/lua-api
```

Once done, running `hugo server` in `doc/site` will show you the site.

See [Documenting Lua development guide](content/development/documenting-lua.md) for info on writing documentation.

# File Structure

These are the important directories:

- `.github`: Contains the workflow for publishing the site onto github pages.
- `content`: This is all of the markdown files that the site visitor will see.
  - `docs`: Documentation; Guides, API docs, etc.
    - `guides`: Guides for game developers.
      - `getting-started`: Guides for new users.
  - `development`: Guides and documentation for engine developers.
  - `articles`: General articles about the engine.
  - `changelogs`: Changelogs.
- `data`: A variety of config files used for rendering different parts of the website.
- `i18n`: Translations.
- `layouts`: Custom Hugo templates used for the site.
- `scripts`: Shell scripts used in the build process for github workflows.
- `generate_from_meta.py`: Glue code for generating lua docs from LLS meta files.
- `README.md`: You are here!

[Hugo]: https://gohugo.io/
